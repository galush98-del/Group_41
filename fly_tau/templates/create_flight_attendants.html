{% extends "base.html" %}

{% block title %}Select Attendants | FlyTAU{% endblock %}

{% block content %}
<section class="card wizard-card">
  <h1 class="page-title">Select flight crew</h1>
  <p class="subtitle">Step: attendants selection</p>

  <div class="info-box">
    <strong>Requirement:</strong>
    Please select exactly <span class="info-number">{{ required_count }}</span> attendants.
  </div>

  {% if error %}
    <div class="error-box">{{ error }}</div>
  {% endif %}

  <form
    action="{{ url_for('create_flight_attendants',
      origin=origin, destination=destination, flight_date=flight_date,
      airplane_id=airplane_id, pilots=pilots) }}"
    method="POST"
    class="form form-narrow"
  >

    <div class="picker-list">
      {% if available_attendants %}
        {% for a in available_attendants %}
          <label class="picker-row">
            <input type="checkbox" name="attendant_ids" value="{{ a[0] }}">
            <div class="picker-meta">
              <div class="picker-name">{{ a[1] }} {{ a[2] }}</div>

              {% if a[3] == 1 %}
                <span class="badge certified">Certified</span>
              {% else %}
                <span class="badge not-certified">Not certified</span>
              {% endif %}
            </div>
          </label>
        {% endfor %}
      {% else %}
        <div class="empty-state">
          <p class="muted">No attendants found available at {{ origin }}.</p>
        </div>
      {% endif %}
    </div>

    {% if available_attendants %}
      <button type="submit" class="btn btn-block">Continue to confirmation</button>
    {% endif %}

<div class="footer-links">
  <a href="{{ url_for('create_flight_pilots',
                      origin=origin,
                      destination=destination,
                      flight_date=flight_date,
                      airplane_id=airplane_id) }}" class="link">
    &larr; Back to pilots selection
  </a>
  <span class="sep">|</span>
  <a href="/manager_linktree" class="link">&larr; Return to Manager Home</a>
</div>

  </form>
</section>
{% endblock %}
