{% extends "base.html" %}

{% block title %}Confirm Flight Details | FlyTAU{% endblock %}

{% block content %}
<section class="card wizard-card">
  <h1 class="page-title">Confirm flight details</h1>

  <div class="info-box">
    <div><b>Origin:</b> {{ origin }}</div>
    <div><b>Destination:</b> {{ destination }}</div>
    <div><b>Departure:</b> {{ flight_date }}</div>
    <div><b>Airplane:</b> {{ airplane_id }}</div>
  </div>

  {% if error %}
    <div class="error-box">{{ error }}</div>
  {% endif %}

  <div class="section">
    <h3 class="section-title">Pilots</h3>
    <div class="table-wrap">
      <table>
        <thead>
          <tr><th>ID</th><th>First name</th><th>Last name</th></tr>
        </thead>
        <tbody>
          {% if pilots %}
            {% for p in pilots %}
              <tr><td>{{ p.id }}</td><td>{{ p.first_name }}</td><td>{{ p.last_name }}</td></tr>
            {% endfor %}
          {% else %}
            <tr><td colspan="3" class="muted">No pilots selected.</td></tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="section">
    <h3 class="section-title">Attendants</h3>
    <div class="table-wrap">
      <table>
        <thead>
          <tr><th>ID</th><th>First name</th><th>Last name</th></tr>
        </thead>
        <tbody>
          {% if attendants %}
            {% for a in attendants %}
              <tr><td>{{ a.id }}</td><td>{{ a.first_name }}</td><td>{{ a.last_name }}</td></tr>
            {% endfor %}
          {% else %}
            <tr><td colspan="3" class="muted">No attendants selected.</td></tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="form-actions">
<a class="btn btn-ghost"
   href="{{ url_for('create_flight', origin=origin, destination=destination) }}">
  ← Edit flight details
</a>
  </div>

  <form
    method="POST"
    action="{{ url_for('create_flight_confirm',
      origin=origin,
      destination=destination,
      flight_date=flight_date,
      airplane_id=airplane_id,
      pilots_str=pilots_str,
      attendants_str=attendants_str) }}"
    class="form"
  >
    <input type="hidden" name="origin" value="{{ origin }}">
    <input type="hidden" name="destination" value="{{ destination }}">
    <input type="hidden" name="flight_date" value="{{ flight_date }}">
    <input type="hidden" name="airplane_id" value="{{ airplane_id }}">
    <input type="hidden" name="pilots" value="{{ pilots_str }}">
    <input type="hidden" name="attendants" value="{{ attendants_str }}">

    <label class="check-row">
      <input type="checkbox" name="confirm_details" required>
      I confirm all details are correct
    </label>

    <button type="submit" class="btn btn-block">Yes — continue to pricing</button>
  </form>
  <div class="footer-links">
  <a href="{{ url_for('create_flight_attendants',
                      origin=origin,
                      destination=destination,
                      flight_date=flight_date,
                      airplane_id=airplane_id,
                      pilots=pilots_str) }}" class="link">
    &larr; Back to flight attendants selection
  </a>
  <span class="sep">|</span>
  <a href="/manager_linktree" class="link">&larr; Return to Manager Home</a>
</div>
</section>
{% endblock %}
